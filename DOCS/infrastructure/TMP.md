[Назад](../infrastructure.md)

# TMP Preprocessor

Позволяет настраивать TMP текст по удобным для вас ключам в формате: `{KEY}`

Препроцессор реализован невероятно удобно и позволяет расширять его функционал до бесконечности, например одна из встроенных функций препроцессора это локализация проекта позволяющая заменять в тексте ключи на локализованный текст из `.json` файла

*Но не забываем что такая локализация на данный момент считается устаревшей, но в качестве примера она остается в проекте.*

## Как создать свою логику для препроцессора?

Для создания мы наследуем интерфейс

```cs
public interface Ipreprocess
{
    string Format(string text);
}
```
Сразу запоминаем что регистрировать ваш класс нигде не нужно `Preprocessor` найдёт его сам через `reflection`.

Разберем пример создания препроцессора, итоговый код будет выглядеть вот таким образом:

```cs
public class UppercasePreprocess : Ipreprocess
{
    private static readonly Regex regex =
        new Regex(@"\{upper:(.*?)\}", RegexOptions.Compiled);

    public string Format(string text)
    {
        return regex.Replace(text, m =>
            m.Groups[1].Value.ToUpper()
        );
    }
}
```

Все что нам после этого остается, это написать в нашем TMP объекте `Hello {upper:world}`
И после этого когда мы запустим сцену наша строка заменится на `Hello WORLD`

Т.е через `private static readonly Regex regex` мы делаем выборку строки и после в `Format` мы меняем ее под свои нужды

